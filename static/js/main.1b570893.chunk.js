(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(2),s=a.n(o),l=a(3),i=a(4),c=a(7),u=a(5),m=a(8),h=(a(15),"AIzaSyAbOllf8T7xq9sAZiH0aACPJvkd17bbvwA"),d=function(e){var t=e.handleInput,a=e.handleSubmit;return r.a.createElement("div",{className:"search"},r.a.createElement("form",{onSubmit:a},r.a.createElement("input",{type:"text",onChange:t,autoFocus:!0,placeholder:"Harry Potter"}),r.a.createElement("button",{type:"submit"},"Search")))},f=a(6),g=a.n(f),p=function(e){var t=e.image,a=e.title,n=e.authors,o=e.publisher,s=e.link;return r.a.createElement("li",{className:"booksgrid-item"},r.a.createElement("div",{className:"image-item"},r.a.createElement("img",{src:t||g.a,alt:a})),r.a.createElement("div",{className:"bookinfo-item"},r.a.createElement("h3",{className:"title"},a),n.length<=1?r.a.createElement("h4",{className:"author"},"Author: ",n[0]):r.a.createElement("h4",{className:"author"},"Authors: ",n.join(", ")),r.a.createElement("h4",{className:"publisher"},"Published by: ",o),r.a.createElement("div",null,r.a.createElement("a",{className:"link",href:s,target:"_blank",rel:"noopener noreferrer"},"More info"))))};p.defaultProps={authors:["Not specified."],title:"Missing title.",publisher:"Missing publisher."};var k=p,b=function(e){var t=e.data;return t?r.a.createElement("div",null,r.a.createElement("ul",{className:"books-grid"},t.map(function(e){return r.a.createElement(k,{key:e.id,id:e.id,image:e.image||e.imageFallback,title:e.title,authors:e.authors,publisher:e.publisher,link:e.previewLink})}))):r.a.createElement("div",null,"Try to search.")},v=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:"",books:null,startIndex:0,error:null,loading:!1},a.handleInput=function(e){a.setState({searchTerm:e.target.value})},a.checkInput=function(e){return e.trim().length<1?(a.setState({error:"Your input is empty."}),!0):(a.setState({error:null}),!1)},a.getBooks=function(e,t){return a.setState({loading:!0}),fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(e,"&startIndex=").concat(t,"&maxResults=10&fields=items(selfLink)&key=").concat(h)).then(function(e){return e.json()}).then(function(e){if(e.error&&e.error.errors.length>0)throw Error(e.error.message.split(". ")[0]);if(0===Object.entries(e).length&&e.constructor===Object)throw Error("No matches found.");return Promise.all(e.items.map(function(e){return fetch("".concat(e.selfLink,"?fields=id,volumeInfo(title,authors,publisher,previewLink,imageLinks(thumbnail,small))&key=").concat(h))}))}).then(function(e){return Promise.all(e.map(function(e){return e.json()}))}).then(function(e){if(e.length<1)throw Error("No books found.");return a.setState({loading:!1}),e.map(function(e){return{id:e.id,title:e.volumeInfo.title,authors:e.volumeInfo.authors,publisher:e.volumeInfo.publisher,previewLink:e.volumeInfo.previewLink,image:e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.small,imageFallback:e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.thumbnail}})}).catch(function(e){a.setState({loading:!1,error:e.message||"Sorry we cannot process your request."})})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.searchTerm,r=t.startIndex,o=t.maxResults;a.checkInput(n)||a.getBooks(n,r,o).then(function(e){return a.setState({books:e})})},a.handleNextPage=function(){a.checkInput(a.state.searchTerm)||a.setState(function(e){return{startIndex:e.startIndex+10}},function(){var e=a.state,t=e.searchTerm,n=e.startIndex,r=e.maxResults;a.getBooks(t,n,r).then(function(e){return a.setState({books:e})})})},a.handlePreviousPage=function(){a.checkInput(a.state.searchTerm)||a.state.startIndex<1||a.setState(function(e){return{startIndex:e.startIndex-10}},function(){var e=a.state,t=e.searchTerm,n=e.startIndex,r=e.maxResults;a.getBooks(t,n,r).then(function(e){return a.setState({books:e})})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",{className:"books"},this.state.loading?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{data:this.state.books}),r.a.createElement("div",{className:"pagination"},this.state.startIndex>1?r.a.createElement("span",{className:"link",onClick:this.handlePreviousPage},"Back"):null,this.state.books?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"page"},"Page ",this.state.startIndex/10+1),r.a.createElement("span",{className:"link",onClick:this.handleNextPage},"Next")):null))),t=r.a.createElement("div",{className:"error"},this.state.error);return r.a.createElement("div",null,r.a.createElement("main",{className:"main"},r.a.createElement("div",null,r.a.createElement("h1",{className:"logo"},"Book Finder"),r.a.createElement(d,{handleInput:this.handleInput,handleSubmit:this.handleSubmit})),this.state.error?t:e,r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{className:"link",href:"http://github.com/g1st/book-finder",target:"_blank",rel:"noopener noreferrer"},"@g1st"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},6:function(e,t,a){e.exports=a.p+"static/media/fallbackImage.caf9523f.jpg"},9:function(e,t,a){e.exports=a(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.1b570893.chunk.js.map